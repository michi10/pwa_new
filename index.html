<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport"
        content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, viewport-fit=cover" />
  <title>CWS – Wetter</title>

  <!-- PWA -->
  <link rel="manifest" href="manifest.json" />
  <meta name="theme-color" content="#10658e" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="mobile-web-app-capable" content="yes" />

  <!-- Fonts & Icons -->
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;600;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"
        referrerpolicy="no-referrer" />

  <!-- Styles -->
  <link rel="stylesheet" href="styles.css" />
</head>

<body>
  <!-- Splash (leicht animiert, barrierearm) -->
  <div id="splash" aria-live="polite" class="splash visible" data-i18n-aria-label="loading">
    <img src="assets/icon-192.png" alt="CWS Logo" width="128" height="128" />
    <p id="splashText" data-i18n="splashLoading">App wird geladen…</p>
    <div class="progress" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0" data-i18n-aria-label="progress">
      <div class="bar" id="progressBar" style="width:0%"></div>
    </div>
  </div>

  <!-- App-Header -->
  <header id="appHeader" class="app-header" data-i18n-aria-label="header">
    <h1 class="brand">CWS</h1>
    <div class="title" id="pageTitle" data-i18n="titleDashboard">Dashboard</div>
    <button id="btnSettings" class="icon-btn" data-i18n-aria-label="openSettings">
      <i class="fa-solid fa-gear"></i>
    </button>
  </header>

  <!-- Hauptinhalt -->
  <main id="app" class="app" role="main" aria-live="polite"></main>

  <!-- Bottom Nav -->
  <nav id="nav" class="nav" role="tablist" data-i18n-aria-label="navigation">
    <button class="nav-btn active" data-route="dashboard" role="tab" aria-selected="true" data-i18n-aria-label="navHome">
      <i class="fa-solid fa-house"></i><span data-i18n="navHome">Home</span>
    </button>
    <button class="nav-btn" data-route="map" role="tab" aria-selected="false" data-i18n-aria-label="navMap">
      <i class="fa-solid fa-map"></i><span data-i18n="navMap">Karte</span>
    </button>
    <button class="nav-btn" data-route="calendar" role="tab" aria-selected="false" data-i18n-aria-label="navCalendar">
      <i class="fa-solid fa-calendar"></i><span data-i18n="navCalendar">Kalender</span>
    </button>
    <button class="nav-btn" data-route="rain" role="tab" aria-selected="false" data-i18n-aria-label="navRain">
      <i class="fa-solid fa-cloud-rain"></i><span data-i18n="navRain">Regen</span>
    </button>
  </nav>

  <!-- Settings-Dialog (AA/AAA-konform) -->
  <dialog id="settings" class="modal" aria-modal="true" data-i18n-aria-label="settings">
    <form method="dialog" class="card">
      <header class="card-head">
        <h2 data-i18n="settings">Einstellungen</h2>
        <button class="icon-btn" value="cancel" data-i18n-aria-label="close">
          <i class="fa-solid fa-xmark"></i>
        </button>
      </header>

      <div class="card-body">
        <fieldset class="group">
          <legend data-i18n="appearance">Darstellung</legend>
          <label class="row">
            <input type="checkbox" id="darkToggle" />
            <span data-i18n="darkMode">Dark Mode aktivieren</span>
          </label>
          <label class="row">
            <input type="checkbox" id="reduceMotion" />
            <span data-i18n="reduceMotion">Animationen reduzieren</span>
          </label>
          <label class="row">
            <input type="checkbox" id="highContrast" />
            <span data-i18n="highContrast">Hohen Kontrast (AAA) aktivieren</span>
          </label>
        </fieldset>

        <fieldset class="group">
          <legend data-i18n="personalization">Personalisierung</legend>
          <div class="row">
            <input id="firstName" data-i18n-placeholder="firstName" placeholder="Vorname" autocomplete="given-name" aria-label="Vorname" data-i18n-aria-label="firstName" />
            <input id="lastName" data-i18n-placeholder="lastName" placeholder="Nachname" autocomplete="family-name" aria-label="Nachname" data-i18n-aria-label="lastName" />
          </div>
          <p class="hint" data-i18n="nameHint">Dein Name erscheint an mehreren Stellen (z. B. „Guten Morgen, Michael“).</p>
          <label class="row">
            <span data-i18n="language">Sprache</span>
            <select id="language">
              <option value="de">Deutsch</option>
              <option value="en">English</option>
            </select>
          </label>
        </fieldset>

        <fieldset class="group">
          <legend data-i18n="dataSource">Datenquelle</legend>
          <p class="hint" data-i18n="dataHint">Aktuell werden Demodaten verwendet. Später wird hier ThingsBoard verbunden.</p>
        </fieldset>
      </div>

      <footer class="card-foot">
        <button class="btn primary" id="saveSettings" value="default" data-i18n="save">Speichern</button>
      </footer>
    </form>
  </dialog>

  <!-- Daten & App -->
  <script src="data/demo.js"></script>
  <script src="app.js"></script>
</body>
</html>
